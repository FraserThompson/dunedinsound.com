---
layout: default
---
{% assign category = page.title | downcase %}

<div class="tiles container-fluid {{category}}">
  {% if page.sortable %}
  <div class="sorting left">
    <div class="btn-group sort-by-button-group" data-toggle="buttons">
      <label class="btn btn-default active" data-sort-value="name" >
        <input type="radio" name="options" id="sort_name" autocomplete="off" checked> Name
      </label>
      <label class="btn btn-default" data-sort-value="numberOfGigs">
        <input type="radio" name="options" id="sort_numberOfGigs" autocomplete="off"> Number of Gigs
      </label>
      <label class="btn btn-default" data-sort-value="date">
        <input type="radio" name="options" id="sort_newest" autocomplete="off"> Newest
      </label>
    </div>
  </div>
 {% endif %}
  <div class="row sorted-tiles">
    {% for tile in site[page.source] %}

      {% assign type = tile.url | split: '/' %}

      {% if type[1] == category and tile.order == null %}

        {% assign machine_name = tile.title | downcase | machine_name %}

        {% assign number_of_small_photos = site.data.media.artists[machine_name]["small"] | size %}

        {% if number_of_small_photos > 0 %}
          {% assign tile_background = site.asset_url | append: "/" | append: site.data.media.artists[machine_name]["small"][0] | uri_escape %}
        {% else %}
          {% assign tile_background = site.asset_url | append: "/" | append: site.data.media.artists[machine_name]["medium"][0] | uri_escape %}
        {% endif %}

          <div class="isotope-item {{page.spacing}} tile-wrap bottom">
              <a class="post-link gridItem {{category}} box" href="{{ tile.url | prepend: site.baseurl }}">
                <div class="tile-title bottom">
                  <h4 class="name">{{ tile.title }} {% if tile.origin %} ({{tile.origin}}) {% endif %}</h4>

                  {% if category == "artists" %}

                    {% for post in site.categories[machine_name] limit: 1 %}
                      {% assign last_gig = post.date %}
                    {% endfor %}

                    <p class="date" style="display: none;">{{last_gig}}</p>
                    <h5><span class="numberOfGigs">{{ site.categories[machine_name].size }}</span> gig{% if site.categories[machine_name].size > 1 %}s{%endif%}</h5>
                  {% endif %}

                  {% if category == "venues" %}
                    {% assign number_of_gigs_at_venue = site.posts | where: "venue", tile.title | size %}
                    <h5><span class="numberOfGigs">{{ number_of_gigs_at_venue }}</span> gig{% if number_of_gigs_at_venue > 1 %}s{%endif%}</h5>
                  {% endif %}

                </div>
                <div class="tile b-lazy" data-src='{{tile_background}}'></div>
              </a>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
